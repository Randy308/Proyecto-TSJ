import{r as p,j as l,P as S}from"./index-CS51DAse.js";import{M as v}from"./MultiBtnDropdown-oYVBAFdf.js";import{E as C,L as k}from"./dark-Bdao2Wg9.js";const j=({memoizedParams:o,limite:t,listaX:n,setListaX:c})=>{const[g,u]=p.useState(null),y=p.useMemo(()=>Object.entries(o).map(([i,d])=>l.jsx("div",{children:l.jsx(v,{setVisible:u,listaX:n,limite:t,setListaX:c,name:i,contenido:d,visible:g})},i)),[o,u,n,c,t,g]);return l.jsx("div",{children:y})},E=({dataset:o,chartType:t,isMultiVariable:n,border:c=!0,handleClick:g})=>{function u(r,e){switch(r){case"bar":return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},dataset:{source:e},xAxis:{type:"category",axisLabel:{rotate:40}},yAxis:{type:"value"},series:[{type:"bar",colorBy:"data",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};case"line":return{legend:{},tooltip:{trigger:"axis"},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",smooth:!0,itemStyle:{color:"#667eea"},lineStyle:{width:3},symbol:"circle",symbolSize:8}]};case"pie":return{legend:{},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},dataset:{source:e},series:[{type:"pie",radius:"60%",center:["50%","60%"],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};case"scatter":return{legend:{},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"scatter",symbolSize:15,itemStyle:{color:"#667eea"}}]};case"area":return{legend:{},tooltip:{trigger:"axis"},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",smooth:!0,areaStyle:{color:new k(0,0,0,1,[{offset:0,color:"rgba(102, 126, 234, 0.8)"},{offset:1,color:"rgba(102, 126, 234, 0.1)"}])},itemStyle:{color:"#667eea"},lineStyle:{width:2}}]};case"column":return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},dataset:{source:e},xAxis:{type:"value"},yAxis:{type:"category"},series:[{type:"bar",colorBy:"data",seriesLayoutBy:"column",barGap:"30%"}]};case"donut":return{tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{},dataset:{source:e},series:[{type:"pie",radius:["40%","70%"],center:["50%","60%"],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};default:throw new Error(`Unsupported chart type: ${r}`)}}function y(r,e){const a=Math.max(e[0].length-1,1);switch(r){case"stackedColumn":return{legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{source:e},xAxis:{type:"value"},yAxis:{type:"category"},series:Array.from({length:a},()=>({type:"bar",stack:"total"}))};case"stackedBar":return{legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:Array.from({length:a},()=>({type:"bar",stack:"total"}))};case"column":{const x=Math.max(e[0].length-1,1);return{legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{source:e},xAxis:{type:"value"},yAxis:{type:"category"},series:Array.from({length:x},()=>({type:"bar",seriesLayoutBy:"column"}))}}case"bar":return{legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{source:e},xAxis:{type:"category",axisLabel:{rotate:40}},yAxis:{gridIndex:0},series:Array.from({length:a},()=>({type:"bar",seriesLayoutBy:"column"}))};case"multiLine":return{legend:{},tooltip:{trigger:"axis"},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:Array.from({length:a},()=>({type:"line",smooth:!0,symbol:"circle",symbolSize:8}))};case"stackedArea":return{legend:{},tooltip:{trigger:"axis"},dataset:{source:e},xAxis:{type:"category"},yAxis:{type:"value"},series:Array.from({length:a},()=>({type:"line",stack:"total",smooth:!0,areaStyle:{}}))};case"polar":return{tooltip:{trigger:"axis"},legend:{},dataset:{source:e},radiusAxis:{},polar:{},angleAxis:{type:"category"},series:Array.from({length:a},()=>({type:"bar",coordinateSystem:"polar",stack:"a",emphasis:{focus:"series"}}))};case"radar":{const x=Math.max(...e.slice(1).flatMap(s=>s.slice(1).map(Number))),f=e.slice(1).map(s=>({name:String(s[0]),max:x})),b=e[0].map((s,A)=>e.map(w=>w[A]));return{tooltip:{},legend:{},radar:{indicator:f},dataset:{source:e},series:[{name:"Budget vs spending",type:"radar",data:b.slice(1).map(s=>({name:s[0],value:s.slice(1)}))}]}}default:throw new Error(`Tipo de gráfico no soportado: ${r}`)}}const[i,d]=p.useState({});p.useEffect(()=>{if(console.log("Actualizando gráfico con dataset:",t),o.length===0){console.warn("Dataset vacío, no se puede actualizar el gráfico.");return}if(!t){console.warn("Tipo de gráfico no especificado, no se puede actualizar el gráfico.");return}m()},[t,o]);const m=()=>{const r=n?y(t,o):u(t,o);r&&d(r)},{isDark:h}=S();return l.jsx("div",{className:`p-2 m-2 rounded-xl bg-white dark:bg-[#100C2A] h-[500px] md:h-[700px] ${c?"border shadow-lg border-gray-300 dark:border-gray-800":""}`,children:l.jsx(C,{option:i,theme:h?"dark":void 0,style:{height:"100%",width:"100%"},onEvents:{click:g}},JSON.stringify(i))})};export{E as O,j as S};
