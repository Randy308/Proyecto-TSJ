import{A as h,b as j,r as a,j as s,U as l,y as u}from"./index-DjMZi7pv.js";import{A as p}from"./AsyncButton-G5RuD1gO.js";import"./TokenService-D4lAZ2Yt.js";import"./Icons-B-YI_6c9.js";import"./index-gT7YffVW.js";import"./index-Ucs30RQg.js";const E=()=>{const{can:d}=h(),g=j(),[m,f]=a.useState(!0),[r,t]=a.useState(!1),[n,c]=a.useState(!1),[b,x]=a.useState(10);a.useEffect(()=>{d("realizar_web_scrapping")?f(!1):g("/")},[]);const y=async()=>{if(!r){t(!0);try{const{data:e}=await l.buscarNuevasResoluciones();console.log(e);const{message:o,cantidad:i}=e;u.success(`${o} Resoluciones encontradas: ${i}.`,{position:"top-right",autoClose:5e3,closeOnClick:!0,draggable:!0}),x(i)}catch(e){console.log("Error al comprobar resoluciones:",e)}finally{t(!1)}}},S=async()=>{if(!n){c(!0);try{const{data:e}=await l.realizarWebScrapping();console.log(e);const{message:o}=e;u.success(`${o}.`,{position:"top-right",autoClose:5e3,closeOnClick:!0,draggable:!0})}catch(e){console.log("Error al comprobar resoluciones:",e)}finally{c(!1)}}};return m?null:s.jsxs("div",{className:"p-4 m-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Búsqueda de Resoluciones"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Presiona el botón para buscar nuevas resoluciones disponibles en el sistema."}),s.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap gap-4",children:[s.jsx(p,{name:"Comprobar resoluciones",isLoading:r,full:!1,asyncFunction:y}),b>0&&s.jsx(p,{name:"Realizar Web Scraping",isLoading:n,full:!1,asyncFunction:S})]})]})};export{E as default};
