import{r as w,a as Z,c as fe,j as s,L as he,z as me,A as ge,y as C,R as z,B as L,C as xe,D as be,E as we}from"./index-CS51DAse.js";import{F as pe}from"./Filtros-CtHZOVzw.js";import{b as G,c as ye,t as R,f as K,a as Q}from"./filterForm-qRQJ7N12.js";import{R as ke}from"./ResolucionTSJ-DtgqibEw.js";import{P as ve}from"./PortalButton-C9pukmzI.js";import{u as Ne}from"./Icons-Beyyzlav.js";import{a as F,t as v,c as Y,n as je,g as $,f as Oe,h as ee,e as Se,d as De}from"./es-DEYhgeyP.js";import{P as Pe}from"./Paginate-CeUBiUk8.js";import"./Login-DbIr_fTM.js";import"./index-Bjhrrt2E.js";import"./index-BBE9PvKj.js";function T(r,e){const t=F(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,n=v(r,e?.in),o=n.getDay(),i=(o<a?7:0)+o-a;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function E(r,e){return T(r,{...e,weekStartsOn:1})}function te(r,e){const t=v(r,e?.in),a=t.getFullYear(),n=Y(t,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const o=E(n),i=Y(t,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const f=E(i);return t.getTime()>=o.getTime()?a+1:t.getTime()>=f.getTime()?a:a-1}function A(r,e){const t=v(r,e?.in);return t.setHours(0,0,0,0),t}function Me(r,e,t){const[a,n]=je(t?.in,r,e),o=A(a),i=A(n),f=+o-$(o),h=+i-$(i);return Math.round((f-h)/Oe)}function Ye(r,e){const t=te(r,e),a=Y(r,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),E(a)}function Ce(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Te(r){return!(!Ce(r)&&typeof r!="number"||isNaN(+v(r)))}function Ee(r,e){const t=v(r,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Fe(r,e){const t=v(r,e?.in);return Me(t,Ee(t))+1}function We(r,e){const t=v(r,e?.in),a=+E(t)-+Ye(t);return Math.round(a/ee)+1}function re(r,e){const t=v(r,e?.in),a=t.getFullYear(),n=F(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Y(e?.in||r,0);i.setFullYear(a+1,0,o),i.setHours(0,0,0,0);const f=T(i,e),h=Y(e?.in||r,0);h.setFullYear(a,0,o),h.setHours(0,0,0,0);const k=T(h,e);return+t>=+f?a+1:+t>=+k?a:a-1}function qe(r,e){const t=F(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,n=re(r,e),o=Y(e?.in||r,0);return o.setFullYear(n,0,a),o.setHours(0,0,0,0),T(o,e)}function Ie(r,e){const t=v(r,e?.in),a=+T(t,e)-+qe(t,e);return Math.round(a/ee)+1}function l(r,e){const t=r<0?"-":"",a=Math.abs(r).toString().padStart(e,"0");return t+a}const j={y(r,e){const t=r.getFullYear(),a=t>0?t:1-t;return l(e==="yy"?a%100:a,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):l(t+1,2)},d(r,e){return l(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return l(r.getHours()%12||12,e.length)},H(r,e){return l(r.getHours(),e.length)},m(r,e){return l(r.getMinutes(),e.length)},s(r,e){return l(r.getSeconds(),e.length)},S(r,e){const t=e.length,a=r.getMilliseconds(),n=Math.trunc(a*Math.pow(10,t-3));return l(n,e.length)}},M={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X={G:function(r,e,t){const a=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(a,{width:"abbreviated"});case"GGGGG":return t.era(a,{width:"narrow"});case"GGGG":default:return t.era(a,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const a=r.getFullYear(),n=a>0?a:1-a;return t.ordinalNumber(n,{unit:"year"})}return j.y(r,e)},Y:function(r,e,t,a){const n=re(r,a),o=n>0?n:1-n;if(e==="YY"){const i=o%100;return l(i,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):l(o,e.length)},R:function(r,e){const t=te(r);return l(t,e.length)},u:function(r,e){const t=r.getFullYear();return l(t,e.length)},Q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(a);case"QQ":return l(a,2);case"Qo":return t.ordinalNumber(a,{unit:"quarter"});case"QQQ":return t.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,e,t){const a=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(a);case"qq":return l(a,2);case"qo":return t.ordinalNumber(a,{unit:"quarter"});case"qqq":return t.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,e,t){const a=r.getMonth();switch(e){case"M":case"MM":return j.M(r,e);case"Mo":return t.ordinalNumber(a+1,{unit:"month"});case"MMM":return t.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(a,{width:"wide",context:"formatting"})}},L:function(r,e,t){const a=r.getMonth();switch(e){case"L":return String(a+1);case"LL":return l(a+1,2);case"Lo":return t.ordinalNumber(a+1,{unit:"month"});case"LLL":return t.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(a,{width:"wide",context:"standalone"})}},w:function(r,e,t,a){const n=Ie(r,a);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):l(n,e.length)},I:function(r,e,t){const a=We(r);return e==="Io"?t.ordinalNumber(a,{unit:"week"}):l(a,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):j.d(r,e)},D:function(r,e,t){const a=Fe(r);return e==="Do"?t.ordinalNumber(a,{unit:"dayOfYear"}):l(a,e.length)},E:function(r,e,t){const a=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(a,{width:"short",context:"formatting"});case"EEEE":default:return t.day(a,{width:"wide",context:"formatting"})}},e:function(r,e,t,a){const n=r.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return l(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,a){const n=r.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return l(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const a=r.getDay(),n=a===0?7:a;switch(e){case"i":return String(n);case"ii":return l(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(a,{width:"short",context:"formatting"});case"iiii":default:return t.day(a,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const a=r.getHours();let n;switch(a===12?n=M.noon:a===0?n=M.midnight:n=a/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const a=r.getHours();let n;switch(a>=17?n=M.evening:a>=12?n=M.afternoon:a>=4?n=M.morning:n=M.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let a=r.getHours()%12;return a===0&&(a=12),t.ordinalNumber(a,{unit:"hour"})}return j.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):j.H(r,e)},K:function(r,e,t){const a=r.getHours()%12;return e==="Ko"?t.ordinalNumber(a,{unit:"hour"}):l(a,e.length)},k:function(r,e,t){let a=r.getHours();return a===0&&(a=24),e==="ko"?t.ordinalNumber(a,{unit:"hour"}):l(a,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):j.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):j.s(r,e)},S:function(r,e){return j.S(r,e)},X:function(r,e,t){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(e){case"X":return V(a);case"XXXX":case"XX":return S(a);case"XXXXX":case"XXX":default:return S(a,":")}},x:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"x":return V(a);case"xxxx":case"xx":return S(a);case"xxxxx":case"xxx":default:return S(a,":")}},O:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U(a,":");case"OOOO":default:return"GMT"+S(a,":")}},z:function(r,e,t){const a=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U(a,":");case"zzzz":default:return"GMT"+S(a,":")}},t:function(r,e,t){const a=Math.trunc(+r/1e3);return l(a,e.length)},T:function(r,e,t){return l(+r,e.length)}};function U(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),n=Math.trunc(a/60),o=a%60;return o===0?t+String(n):t+String(n)+e+l(o,2)}function V(r,e){return r%60===0?(r>0?"-":"+")+l(Math.abs(r)/60,2):S(r,e)}function S(r,e=""){const t=r>0?"-":"+",a=Math.abs(r),n=l(Math.trunc(a/60),2),o=l(a%60,2);return t+n+e+o}const J=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ae=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_e=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],a=t[1],n=t[2];if(!n)return J(r,e);let o;switch(a){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",J(a,e)).replace("{{time}}",ae(n,e))},Le={p:ae,P:_e},Re=/^D+$/,Be=/^Y+$/,He=["D","DD","YY","YYYY"];function Ge(r){return Re.test(r)}function Qe(r){return Be.test(r)}function $e(r,e,t){const a=Ae(r,e,t);if(console.warn(a),He.includes(r))throw new RangeError(a)}function Ae(r,e,t){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${a} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Xe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ve=/^'([^]*?)'?$/,Je=/''/g,Ze=/[a-zA-Z]/;function ze(r,e,t){const a=F(),n=t?.locale??a.locale??Se,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,f=v(r,t?.in);if(!Te(f))throw new RangeError("Invalid time value");let h=e.match(Ue).map(g=>{const m=g[0];if(m==="p"||m==="P"){const N=Le[m];return N(g,n.formatLong)}return g}).join("").match(Xe).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const m=g[0];if(m==="'")return{isToken:!1,value:Ke(g)};if(X[m])return{isToken:!0,value:g};if(m.match(Ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:g}});n.localize.preprocessor&&(h=n.localize.preprocessor(f,h));const k={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return h.map(g=>{if(!g.isToken)return g.value;const m=g.value;(!t?.useAdditionalWeekYearTokens&&Qe(m)||!t?.useAdditionalDayOfYearTokens&&Ge(m))&&$e(m,e,String(r));const N=X[m[0]];return N(f,m,n.localize,k)}).join("")}function Ke(r){const e=r.match(Ve);return e?e[1].replace(Je,"'"):r}const et=({resolutions:r,termino:e})=>{const[t,a]=w.useState([]),n=40,{data:o}=Z(),{removeAllIcon:i,checkAllIcon:f}=Ne(),[h,k]=w.useState(!1),g=fe(),m=c=>{const y=Number(c.target.value);a(d=>d.includes(y)?d.filter(p=>p!==y):t.length>=n?(C.error(`No puede seleccionar más de ${n} resoluciones. Por favor, deseleccione algunas antes de continuar.`),d):[...d,y])},N=c=>{c.preventDefault();const d=r.map(O=>Number(O.id)).filter(O=>!t.includes(O)),p=n-t.length;if(p<=0){C.error("Ya alcanzaste el límite de resoluciones seleccionadas");return}const D=d.slice(0,p);a(O=>{const I=new Set([...O,...D]);return Array.from(I)})},W=c=>{c.preventDefault(),a(y=>y.filter(d=>!r.some(p=>Number(p.id)===d)))},q=async c=>{if(c.preventDefault(),t.length<=0){C.error("Debe agregar resoluciones");return}const y=K({ids:t,term:e});k(!0),z.obtenerCronologiabyIds(y).then(({data:d})=>{console.log(d);const p=new Blob([d],{type:"application/pdf"}),D=URL.createObjectURL(p);console.log("PDF URL:",D),g("/Jurisprudencia/Cronologias/Resultados",{state:{pdfUrl:D}})}).catch(d=>{const p=d.response?.data?.error||"Ocurrió un error";console.error("Error fetching data:",p)}).finally(()=>{k(!1)})};return h?s.jsx(he,{}):s.jsxs("div",{className:"relative overflow-x-auto flex flex-col gap-4 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 px-2",children:[s.jsxs("a",{onClick:c=>N(c),className:"dark:bg-gray-800 dark:border-gray-700 inline-flex items-center justify-between border hover:cursor-pointer border-gray-200 p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[f,s.jsx("span",{className:"ms-2 text-xs",children:"Seleccionar todos"})]}),s.jsxs("a",{onClick:c=>W(c),className:"dark:bg-gray-800 dark:border-gray-700 inline-flex items-center border hover:cursor-pointer border-gray-200 p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group",children:[i,s.jsx("span",{className:"ms-2 text-xs",children:"Quitar Selección"})]}),s.jsx("a",{onClick:c=>q(c),className:"dark:bg-gray-800 dark:border-gray-700 inline-flex items-center border hover:cursor-pointer border-gray-200 p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group",children:s.jsx("span",{className:"ms-2 text-xs",children:" Obtener Resoluciones"})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map((c,y)=>s.jsxs("div",{className:`relative p-6 rounded-2xl bg-white dark:bg-gray-900 shadow-md border-2 hover:shadow-lg transition ${t.includes(Number(c.id))?"border-blue-400 dark:border-blue-900":"border-gray-100"}`,children:[s.jsx("input",{type:"checkbox",id:`checkbox-${c.id}`,value:c.id,checked:t.includes(Number(c.id)),onChange:m,className:"hidden peer","aria-label":`Seleccionar resolución ${c.nro_resolucion}`}),t.includes(Number(c.id))?s.jsx("label",{htmlFor:`checkbox-${c.id}`,className:"hover:cursor-pointer text-blue-700",children:s.jsx(me,{className:"h-7 w-7"})}):s.jsx("label",{htmlFor:`checkbox-${c.id}`,className:"hover:cursor-pointer text-gray-400 dark:text-gray-500",children:s.jsx(ge,{className:"h-7 w-7"})}),s.jsx("div",{className:"text-center",children:s.jsx(ve,{title:"Auto Supremo",color:"link",withIcon:!1,full:!1,name:`${G((String(c.tipo_resolucion)||"").toLowerCase(),"tipo_resolucion",o||{})} Nº${ye(c.nro_resolucion||"")}`,large:!0,content:()=>s.jsx(ke,{id:Number(c.id)})})}),s.jsxs("div",{className:"space-y-2 text-sm",children:[Object.keys(c).filter(d=>!["id","contenido","demandante","demandado","sintesis","maxima","precedente","proceso","nro_resolucion","tipo_resolucion"].includes(d)&&c[d]).map(d=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start",children:[s.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300 min-w-[140px]",children:[R(d),":"]}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400 sm:ml-2",children:d==="fecha_emision"?ze(c.fecha_emision||new Date,"d 'de' MMMM 'de' yyyy",{locale:De}):G((c[d]||"").toString(),d,o||{})})]},d)),Object.keys(c).filter(d=>["contenido","demandante","demandado","sintesis","maxima","precedente","proceso"].includes(d)&&c[d]).map(d=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start",children:[s.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300 min-w-[140px]",children:[R(d),":"]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-400 mt-1",dangerouslySetInnerHTML:{__html:(c[d]||"").toString()}})]},d))]})]},y))})]})},tt=({options:r,selectedOptions:e,setSelectedOptions:t})=>{const[a,n]=w.useState(!1),o=i=>{const f=i.target.value;f!=="all"&&(n(!1),t(h=>[...h,f]))};return s.jsxs("div",{className:"flex dark:bg-gray-600 relative m-2 justify-between items-center gap-2 border rounded-md py-2 w-auto lg:w-96",children:[s.jsx("div",{className:"ps-1",children:e.length>0?s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(i=>s.jsxs("div",{className:"text-xs dark:bg-gray-900 capitalize p-1 rounded-md border hover:cursor-pointer border-gray-300 hover:border-red-400 flex gap-2 justify-between items-center group",onClick:()=>t(f=>f.filter(h=>h!==i)),children:[s.jsx("span",{children:i}),s.jsx(L,{className:"group-hover:text-red-400"})]},i))})}):s.jsx("div",{className:"text-gray-500 text-xs ps-2",children:"Seleccione los campos donde buscar"})}),s.jsxs("div",{className:"text-xs p-1 rounded-md group hover:border-red-400  border-gray-300 flex gap-2 justify-between items-center",children:[e.length>0&&s.jsx("a",{className:"hover:text-gray-400",onClick:()=>t([]),children:s.jsx(L,{className:"h-5 w-5"})}),s.jsx("a",{className:"hover:text-gray-400",onClick:()=>n(!a),children:s.jsx(xe,{className:"h-5 w-5"})}),s.jsx("div",{className:`absolute flex flex-col border shadow-lg top-full w-full left-0 bg-white dark:bg-gray-800 z-10 ${a?"block":"hidden"}`,children:r.map(i=>!e.includes(i.value)&&s.jsxs("label",{className:"group w-full flex",children:[s.jsx("input",{name:i.value,type:"checkbox",className:"hidden group",value:i.value,onChange:o},i.value),s.jsx("span",{className:"flex-1 py-2 text-md ps-2 dark:bg-gray-700 hover:dark:bg-gray-950 hover:bg-red-octopus-300 hover:text-white w-full",children:i.label})]},i.value))})]})]})},ht=()=>{const{data:r}=Z(),[e,t]=w.useState(""),[a,n]=w.useState({}),[o,i]=w.useState({}),[f,h]=w.useState([]),[k,g]=w.useState(""),[m,N]=w.useState(!1),[W,q]=w.useState({}),[c,y]=w.useState(1),[d,p]=w.useState(1),[D,O]=w.useState(1),[I,ne]=w.useState(1),[_,se]=w.useState([]),oe=[{value:"contenido",label:"Contenido"},{value:"proceso",label:"Proceso"},{value:"sintesis",label:"Síntesis"},{value:"maxima",label:"Maxima"},{value:"precedente",label:"Precedente"},{value:"demandado",label:"Demandado"},{value:"demandante",label:"Demandante"}],ie=(u,x)=>{n(P=>{const b={...P};if(b[x]){const H=b[x].filter(ue=>ue!==u);H.length>0?b[x]=H:delete b[x]}return b})},ce=u=>{const x=Math.min(u,c);p(u),B(x)},B=async u=>{if(_.length<1){C.warning("Debe seleccionar al menos un campo de búsqueda");return}if(m)return;N(!0);const x=u&&!isNaN(u)&&u>0?u:1;x===1&&p(1);const P=K({term:k,highlight:_,...a});h([]),z.buscarResoluciones({...P,page:x}).then(b=>{b.data.data.length>0?(h(b.data.data),y(b.data.last_page),O(b.data.last_page),q(Q(b.data.facets,r||{})),ne(b.data.total)):C.warning("No existen datos")}).catch(b=>{console.error("Error fetching data:",b),h([])}).finally(()=>{N(!1)})};w.useEffect(()=>{i(Q(a,r||{}))},[r,a]);const de=u=>!!(/^[a-zA-ZáéíóúÁÉÍÓÚñÑ0-9\s'"’-]+$/.test(u)||u===""),le=u=>{const x=u.target.value;de(x)?(g(x),t("")):t("No se permiten caracteres especiales")};return s.jsxs("div",{className:"pt-20 text-black dark:text-white",children:[s.jsx("p",{className:"text-4xl uppercase titulo font-bold text-center",children:"Búsqueda de Resoluciones"}),s.jsxs("div",{className:"flex items-center m-8 justify-center",children:[s.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Criterio de Búsqueda:"}),s.jsx(tt,{options:oe,selectedOptions:_,setSelectedOptions:se}),s.jsx("input",{type:"text",id:"simple-search",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Ingrese termino de búsqueda",value:k,onChange:u=>le(u)}),s.jsxs("button",{type:"button",onClick:()=>B(1),className:"p-2.5 ms-2 flex gap-2 items-center text-sm font-medium text-white bg-red-octopus-700 rounded-lg border border-red-octopus-700 hover:bg-red-octopus-800 focus:ring-4 focus:outline-none focus:ring-red-octopus-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[s.jsx(be,{className:"w-4 h-4"}),s.jsx("span",{className:"",children:"Buscar"})]})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:s.jsx("div",{className:"w-full",children:e.length>0&&s.jsxs("div",{id:"alert-2",className:"flex items-center p-4 mb-4 text-red-800 rounded-lg  dark:bg-gray-800 dark:text-red-400",role:"alert",children:[s.jsx(we,{className:"shrink-0 w-4 h-4"}),s.jsx("div",{className:"ms-3 text-sm font-medium",children:e})]})})}),s.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-4 lg:grid-cols-5 gap-4 p-4 m-4",children:[s.jsxs("div",{className:"rounded-lg py-3",children:[s.jsx("p",{className:"text-2xl font-bold p-2",children:"Filtros"}),s.jsx("div",{className:"gird grid-cols-1 gap-4 p-2 my-2",children:Object.entries(W||r).map(([u,x])=>!["materia","tipo_jurisprudencia"].includes(u)&&s.jsx(pe,{nombre:u,data:x,formData:a,setFormData:n},u))})]}),s.jsxs("div",{className:"sm:col-span-3 lg:col-span-4",children:[o&&Object.keys(o).length>0&&s.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[s.jsx("span",{className:"text-lg font-bold",children:"Filtrado por:"}),Object.entries(o).map(([u,x])=>s.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[s.jsxs("span",{className:"uppercase text-xs font-bold",children:[R(u),":"]}),s.jsx("div",{className:"flex gap-4 flex-wrap",children:x.map((P,b)=>s.jsxs("div",{className:"text-xs p-1 rounded-md border hover:cursor-pointer border-gray-300 hover:border-red-400 flex gap-2 justify-between items-center group",onClick:()=>ie(P.id,u),children:[s.jsx("span",{children:P.nombre}),s.jsx(L,{className:"group-hover:text-red-400"})]},b))})]},u))]}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"pt-4 ",children:s.jsx("div",{className:"sm:p-4 pt-4",children:f.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(et,{resolutions:f,termino:k}),s.jsx(Pe,{handlePageClick:ce,pageCount:D,actualPage:d,totalCount:I})]})})})})]})]})]})};export{ht as default};
